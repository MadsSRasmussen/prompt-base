services:
  api:
    build: ./api
    ports:
      - "8080:8080"
    environment:
      - DB_HOST=${DB_HOST}
      - DB_USER=${DB_USER}
      - DB_PASSWORD=${DB_PASSWORD}
      - DB_NAME=${DB_NAME}
      - FIREBASE_ADMIN_TYPE=${FIREBASE_ADMIN_TYPE}
      - FIREBASE_ADMIN_PROJECT_ID=${FIREBASE_ADMIN_PROJECT_ID}
      - FIREBASE_ADMIN_PRIVATE_KEY_ID=${FIREBASE_ADMIN_PRIVATE_KEY_ID}
      - FIREBASE_ADMIN_PRIVATE_KEY=${FIREBASE_ADMIN_PRIVATE_KEY}
      - FIREBASE_ADMIN_CLIENT_EMAIL=${FIREBASE_ADMIN_CLIENT_EMAIL}
      - FIREBASE_ADMIN_CLIENT_ID=${FIREBASE_ADMIN_CLIENT_ID}
      - FIREBASE_ADMIN_AUTH_URI=${FIREBASE_ADMIN_AUTH_URI}
      - FIREBASE_ADMIN_TOKEN_URI=${FIREBASE_ADMIN_TOKEN_URI}
      - FIREBASE_ADMIN_AUTH_PROVIDER=${FIREBASE_ADMIN_AUTH_PROVIDER}
      - FIREBASE_ADMIN_CLIENT=${FIREBASE_ADMIN_CLIENT}
      - FIREBASE_ADMIN_UNIVERSE_DOMAIN=${FIREBASE_ADMIN_UNIVERSE_DOMAIN}
    depends_on:
      - db

  db:
    image: mysql:9.1.0
    environment:
      - MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD}
      - MYSQL_DATABASE=${MYSQL_DATABASE}
    ports:
      - "3306:3306"
    volumes:
      - prompt_base:/var/lib/mysql

volumes:
  prompt_base: {}